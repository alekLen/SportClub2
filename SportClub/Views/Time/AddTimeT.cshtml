@Html.AntiForgeryToken()
<div class="flex" style="justify-content:space-around;">
   <div >
        <h4 class="whiteY" style="text-align:center;padding:5px; box-shadow: inset 0 -3em 3em rgba(0, 0, 0, 0.1), 0.3em 0.3em 1em black;">Создать время для графиков</h4>
        @model SportClub.Models.TimeTimetableModel

  
     <div class="flex padd div_reg2">

            <div class=" card c7 padd" style=" background-color: #2F4F4F;padding-top:0px;">
                <h4 class="whiteY" style="text-align:center;">@Resources.Resource.Addition</h4>
                <form asp-controller="Time" method="post" style=" background-color: white;padding:10px;border:0px;">
               @*  @model SportClub.BLL.DTO.TimeTDTO
                @Html.AntiForgeryToken() *@
             
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="form-group" >
                        <span style="text-align:center;">Время начала</span><br />
                        <input name="Start" id="start" class="form-control card _c7" placeholder="00:00" style=" background-color: white" />
                    <span  id="st" class="text-danger"></span>
                </div>
                <div class="form-group">
                        <span style="text-align:center;">Время окончания</span><br />
                        <input name="End" id="end" class="form-control card _c7" placeholder="00:00" style=" background-color: white" />
                    <span  id="en" class="text-danger"></span>

                 </div>
                    <br /><br /><br />
                    <div class="form-group"  style=" background-color: #2F4F4F;padding:20px;margin:-10px;justify-content:center;">
                        <input type="submit" id="add" formaction="AddTimeT" value="@Resources.Resource.Add" class="btn btn-primary  buttonsGY" />
                 </div>
            </form>

        </div>
        <div style="width:20px"></div>
            <div class=" card c7 padd" style=" background-color: #2F4F4F;padding-top:0px;">

                <form asp-controller="Time" method="post" style="border:0px;">
                    <label class="whiteY" style="text-align:center;">Сохраненное время</label><br />
             @*    <select asp-for="Id" size="14" class="form-control card _c7" asp-items="ViewBag.TimeId"></select> *@
                    <select asp-for=@Model.Time.Id size="10"  name="timeId" class="idTime form-control card _c7" asp-items="ViewBag.TimeId"></select>
                    <br />
                <div class="form-group">
                        <input type="submit" formmethod="get" formaction="EditTime" value="@Resources.Resource.Edit" class="btn btn-primary  buttonsGY" /><br /><br />
                        
                </div>
                
                    <a id="btnDelTime" class="btn btn-primary   buttonsGY ">@Resources.Resource.Delete</a><br /><br />
            </form>
        </div>
    </div>
  </div>
  <div >
        <h4 class="whiteY" style="text-align:center;padding:5px;box-shadow: inset 0 -3em 3em rgba(0, 0, 0, 0.1), 0.3em 0.3em 1em black;">Создание графика дня</h4>

    <div class="flex padd div_reg2">

        <div class="padd">
            <h4 class="whiteY">График дня</h4>
                <form asp-controller="Time" method="post" style=" background-color: #2F4F4F;padding-top:30px;">
              @*   @model SportClub.BLL.DTO.TimetableDTO *@

                    <select asp-for=@Model.Timetable.Id size="10" class="form-control card _c7" asp-items="ViewBag.TimetableId" ></select>
                <br />
                <div class="form-group">
                        <input type="submit" formaction="AddTimetable" value="Сохранить график" class="btn btn-primary buttonsGY" /><br /><br />
                      </div>
            </form>
                <a asp-area="" asp-controller="Time" asp-action="Cancel" class="btn btn-primary buttonsGY">Отмена</a>
                <a asp-area="" asp-controller="Time" asp-action="Exit" class="btn btn-primary buttonsGY">Выход</a>

        </div>
        <div style="width:20px;"></div>
        <div class="padd">
           
            <form asp-controller="Time" method="post">
                    <label class="whiteY" style="text-align:center;">Выберите время для графика</label><br />
                <br />
               @*  <select asp-for="Id" size="10" class="form-control card _c7" asp-items="ViewBag.TimeId"></select> *@
                     <select asp-for=@Model.Time.Id size="7" name="Tid" class="form-control card _c7" asp-items="ViewBag.TimeId"></select> 
                <br /> <br />
                <div class="form-group">
                        <input type="submit" formmethod="get" formaction="AddTimesToTable" value="Добавить время в график" class="btn btn-primary  buttonsGY" />
                   
                </div>
                    <br /><br />
                    <a asp-area="" asp-controller="Time" asp-action="GetAllTimetable" class="btn btn-primary buttonsGY">Все сохраненные  графики</a>
            </form>
        </div>
    </div>
  </div>

</div>
 

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {

        $("#start").on("change", function (e) {
            let value = e.target.value;
            let pattern="^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$";
            let r = true;
            if (Regex.IsMatch(value, pattern)) {
                        $("#st").css("display", "block");
                        r = false;
            }
            if (r) {
                $("#st").css("display", "none");
            }
        });
        $("#end").on("change", function (e) {
            let value = e.target.value;
            let pattern = "^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$";
            let r = true;
            if (Regex.IsMatch(value, pattern)) {
                $("#en").css("display", "block");
                r = false;
            }
            if (r) {
                $("#en").css("display", "none");
            }
        });
        var idTi;
        var selectElement = document.querySelector('.idTime');    
        selectElement.addEventListener('change', function () {
            idTi = this.value; 
        });

       

        $("#btnDelTime").click(function () { 
            
                $("<div id='dialogContent3'></div>")
                    .addClass("dialog")
                    .appendTo("body")
                .load("Admin/AddedPost")
                    .dialog({
                        title: "Подтвердите!",
                        close: function () { $(this).remove(); },
                        dialogClass: 'myTitleClass',
                        modal: true,
                        resizable: false,
                        buttons: [{
                            class: "input_subm2",//
                            text: "Удалить",
                            click: function () {
                                $.ajax({
                                    url: "@Url.Action("ConfirmDeleteTime", "Time")",
                                    type: "POST",
                                    data: { Id: idTi },
                                    datatype: "json",
                                    success: function (response) {

                                        if (response) {
                                            $("#dialogContent3").remove();
                                            $("<div id='dialogContent4'></div>")
                                                .addClass("dialog")
                                                .appendTo("body")
                                                .load("/Admin/AddedPost")
                                                .dialog({
                                                    title: "Удалено!",
                                                    close: function () { window.location.href = "@Url.Action("AddTimeT", "Time")"; },
                                                    dialogClass: 'myTitleClass',
                                                    modal: true,
                                                    resizable: false,
                                                    buttons: [{
                                                        class: "input_subm2",//
                                                        text: "Закрыть",
                                                        click: function () {
                                                        window.location.href = "@Url.Action("AddTimeT", "Time")";
                                                        }
                                                    }],
                                                    open: function (event, ui) {
                                                        StyleDialog($(this).closest(".ui-dialog"));
                                                    }
                                                });
                                        }
                                        else {
                                            $("#dialogContent3").remove();
                                            $("<div id='dialogContent4'></div>")
                                                .addClass("dialog")
                                                .appendTo("body")
                                                .load("/Admin/AddedPost")
                                                .dialog({
                                                    title: "Ошибка удаления!",
                                                    close: function () { window.location.href = "@Url.Action("AddTimeT", "Time")"; },
                                                    dialogClass: 'myTitleClass',
                                                    modal: true,
                                                    resizable: false,
                                                    buttons: [{
                                                        class: "input_subm2",//
                                                        text: "Закрыть",
                                                        click: function () {
                                                        window.location.href = "@Url.Action("AddTimeT", "Time")";
                                                        }
                                                    }],
                                                    open: function (event, ui) {
                                                        StyleDialog($(this).closest(".ui-dialog"));
                                                    }
                                                });
                                        }
                                    }
                                });
                            }
                        }],
                        open: function (event, ui) {
                            StyleDialog($(this).closest(".ui-dialog"));
                        }
                    });


          
        });

    });
</script>