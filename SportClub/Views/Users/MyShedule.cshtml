 @model TrainingsAllToSee


<h2>Индивидуальные тренировки</h2>
<div class="flex">
    @if (Model.trInds.Count == 0)
    {
        <h4 class="green" style="padding:10px;">Не назначены</h4>
    }
    else{ 
    @foreach (var it in Model.trInds)
    {

        <div class="padd1 marg">
            <div>
                <h3 class="white"> @it.DayName</h3>
                <input type="text" name="time" value="@it.Time" style="width:120px; background-color:yellow;font-size:20px;" readonly> <br />
            </div>
            <img src=@it.Room.Photo width="100" height="100" alt="Photo" style="background-color:wheat" />
            <div>
                <span class="white">@it.Room.Name</span>

            </div>
                       

                <br />
                <img src="@it.Coach.Photo" style="width:50px;height:50px" alt="photo" class="marg" /><br />
                <span class="white">Тренер : </span><br />
                <span class="white">@it.Coach.Name</span><br />
                <br /> <a href="javascript:void(0)" class="btn1n btn  btn-outline-light buttons btnDelTR" id="@it.Id" style="background-color:coral;color:white">Отменить запись</a>
        </div>

    }
    }
</div>

<h2>Групповые тренировки</h2>

<div class="flex">
     @if (Model.trGrs.Count == 0)
    {
        <h4 class="green" style="padding:10px;" >Не назначены</h4>
    }
    else{ 
    @foreach (var it in Model.trGrs)
    {
        <div class="flex  marg">
            <div class="padd1 ">
                <div>
                    <h3 class="white"> @it.DayName</h3>
                    <input type="text" name="time" value="@it.Time" style="width:120px; background-color:yellow;font-size:20px;" readonly> <br />
                </div>
                <img src=@it.Room.Photo width="100" height="100" alt="Photo" style="background-color:wheat" />
                <div>
                    <span class="white">@it.Room.Name</span>
                </div>
            </div>
           
                <div class="flex padd1 " style="flex-direction:column">
                    <h5 class="white">@it.Group.Name ( @it.Group.Number )</h5>
                    <img src="@it.Coach.Photo" style="width:50px;height:50px" alt="photo" class="marg" /><br />
                    <span class="white">Тренер : </span><br />
                    <span class="white">@it.Coach.Name</span><br />
                    <br /> <a class="btn btn-outline-dark" style="background-color:coral" asp-area="" asp-route-roomId="@it.Room.Id" asp-route-groupId="@it.Id" asp-controller="Group" asp-action="">Отменить</a>
                </div>
                <br />
            

        </div>

    }
    }
</div>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $(".btnDelTR").click(function () {
            var buttonId = $(this).attr('id');
            var puth = "/Admin/MyAction/" + buttonId;
            $("<div id='dialogContent3'></div>")
                .addClass("dialog")
                .appendTo("body")
                .load(puth)
                .dialog({
                    title: "Подтвердите отмену записи на тренировку",
                    close: function () { $(this).remove(); },
                    dialogClass: 'myTitleClass',
                    modal: true,
                    resizable: false,
                    buttons: [{
                        class: "input_subm2",//
                        text: "Подтвердить",
                        click: function () {
                            $.ajax({
                                url: "@Url.Action("CancelAppointment_UserSide", "TrainingInd")",
                                type: "POST",
                                data: { id: buttonId },
                                datatype: "json",
                                success: function (response) {

                                    if (response) {
                                        $("#dialogContent3").remove();
                                        $("<div id='dialogContent4'></div>")
                                            .addClass("dialog")
                                            .appendTo("body")
                                            .load("/Admin/AddedPost")
                                            .dialog({
                                                title: "Вы отменили тренировку!",
                                                close: function () { window.location.href = "@Url.Action("MyShedule", "Users")"; },
                                                dialogClass: 'myTitleClass',
                                                modal: true,
                                                resizable: false,
                                                buttons: [{
                                                    class: "input_subm2",//
                                                    text: "Назад",
                                                    click: function () {
                                                        window.location.href = "@Url.Action("MyShedule", "Users")";
                                                    }
                                                }],
                                                open: function (event, ui) {
                                                    StyleDialog($(this).closest(".ui-dialog"));
                                                }
                                            });
                                    }
                                    else {
                                        let l2 = document.getElementById("error-login1");
                                        l2.style.display = "inline";
                                    }
                                }
                            });
                        }
                    }],
                    open: function (event, ui) {
                        StyleDialog($(this).closest(".ui-dialog"));
                    }
                });

        });
    });
</script>
